<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jump Jump Rabbit - Oyun</title>
    <link rel="stylesheet" href="./style.css">
    <style>
        .game-page {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .game-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            height: 600px;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }
        
        .background-layers {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        
        .layer {
            position: absolute;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.7;
        }
        
        .game-iframe {
            position: relative;
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 15px;
            z-index: 10;
        }
        
        .game-controls {
            margin-top: 20px;
            text-align: center;
            color: white;
            font-family: 'Press Start 2P', cursive;
        }
        
        .control-info {
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            font-size: 0.8rem;
        }
        
        .home-button {
            display: inline-block;
            padding: 12px 30px;
            background: linear-gradient(135deg, #FF5722, #FF9800);
            color: white;
            text-decoration: none;
            border-radius: 25px;
            margin: 15px 10px;
            font-size: 0.9rem;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .home-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }
        
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            z-index: 20;
            font-family: 'Press Start 2P', cursive;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #FF5722;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @media (max-width: 768px) {
            .game-container {
                height: 500px;
                margin: 10px;
            }
            
            .control-info {
                font-size: 0.7rem;
                padding: 10px;
            }
        }
    </style>
</head>
<body class="game-page">
    <div class="game-container">
        <!-- Arka plan katmanlarƒ± -->
        <div class="background-layers">
            <img src="./JumpJumpRabbit/tema/background/background_0.png" class="layer" alt="Background 1">
            <img src="./JumpJumpRabbit/tema/background/background_1.png" class="layer" alt="Background 2">
            <img src="./JumpJumpRabbit/tema/background/background_2.png" class="layer" alt="Background 3">
        </div>
        
        <!-- Y√ºkleme ekranƒ± -->
        <div class="loading-overlay" id="loadingOverlay">
            <div class="spinner"></div>
            <p>Oyun Y√ºkleniyor...</p>
            <p style="font-size: 0.6rem; margin-top: 10px;">L√ºtfen bekleyin</p>
        </div>
        
        <!-- Oyun iframe -->
        <iframe 
            id="gameFrame"
            src="https://replit.com/@azrasevval63/JumpJumpRabbit?embed=true" 
            class="game-iframe"
            allow="accelerometer; autoplay; camera; encrypted-media; geolocation; gyroscope; microphone"
            allowfullscreen>
        </iframe>
    </div>
    
    <div class="game-controls">
        <div class="control-info">
            <p>üéÆ KONTROLLER</p>
            <p>‚¨ÖÔ∏è‚û°Ô∏è Hareket | ‚¨ÜÔ∏è Zƒ±plama | Z = S√ºper Zƒ±plama</p>
            <p>ü•ï Havu√ßlarƒ± toplayƒ±n ve y√ºksek skor yapƒ±n!</p>
        </div>
        
        <a href="index.html" class="home-button">üè† ANA SAYFA</a>
        <a href="javascript:location.reload()" class="home-button">üîÑ YENƒ∞DEN BA≈ûLAT</a>
    </div>

    <script>
        // Iframe y√ºkleme kontrol√º
        const gameFrame = document.getElementById('gameFrame');
        const loadingOverlay = document.getElementById('loadingOverlay');
        
        // Y√ºkleme tamamlandƒ±ƒüƒ±nda overlay'i gizle
        gameFrame.addEventListener('load', function() {
            setTimeout(() => {
                loadingOverlay.style.opacity = '0';
                setTimeout(() => {
                    loadingOverlay.style.display = 'none';
                }, 500);
            }, 2000); // 2 saniye bekle
        });
        
        // Klavye kontrollerini iframe'e y√∂nlendir
        document.addEventListener('keydown', function(e) {
            // Oyun kontrolleri i√ßin tu≈ülarƒ± iframe'e g√∂nder
            if (['ArrowLeft', 'ArrowRight', 'ArrowUp', 'Space', 'KeyZ'].includes(e.code)) {
                e.preventDefault();
                try {
                    // Iframe i√ßindeki oyuna mesaj g√∂nder
                    gameFrame.contentWindow.postMessage({
                        type: 'keydown',
                        key: e.code
                    }, '*');
                } catch (error) {
                    console.log('Iframe eri≈üim hatasƒ±:', error);
                }
            }
        });
        
        // Dokunmatik kontroller (mobil)
        let touchStartX = 0;
        let touchStartY = 0;
        
        document.addEventListener('touchstart', function(e) {
            touchStartX = e.changedTouches[0].screenX;
            touchStartY = e.changedTouches[0].screenY;
        });
        
        document.addEventListener('touchend', function(e) {
            const touchEndX = e.changedTouches[0].screenX;
            const touchEndY = e.changedTouches[0].screenY;
            
            const deltaX = touchEndX - touchStartX;
            const deltaY = touchEndY - touchStartY;
            
            // Hareket y√∂n√ºn√º belirle
            if (Math.abs(deltaX) > Math.abs(deltaY)) {
                // Yatay hareket
                if (deltaX > 50) {
                    // Saƒüa kaydƒ±r
                    simulateKey('ArrowRight');
                } else if (deltaX < -50) {
                    // Sola kaydƒ±r
                    simulateKey('ArrowLeft');
                }
            } else {
                // Dikey hareket
                if (deltaY < -50) {
                    // Yukarƒ± kaydƒ±r (zƒ±plama)
                    simulateKey('ArrowUp');
                }
            }
        });
        
        function simulateKey(keyCode) {
            try {
                gameFrame.contentWindow.postMessage({
                    type: 'keydown',
                    key: keyCode
                }, '*');
            } catch (error) {
                console.log('Dokunmatik kontrol hatasƒ±:', error);
            }
        }
        
        // Hata durumunda alternatif √ß√∂z√ºm
        gameFrame.addEventListener('error', function() {
            loadingOverlay.innerHTML = `
                <div style="text-align: center;">
                    <p>‚ö†Ô∏è Oyun y√ºklenemedi</p>
                    <p style="font-size: 0.7rem;">L√ºtfen internet baƒülantƒ±nƒ±zƒ± kontrol edin</p>
                    <button onclick="location.reload()" class="home-button" style="margin-top: 20px;">
                        üîÑ Yeniden Dene
                    </button>
                </div>
            `;
        });
        
        // Tam ekran modu
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                gameFrame.requestFullscreen().catch(err => {
                    console.log('Tam ekran hatasƒ±:', err);
                });
            } else {
                document.exitFullscreen();
            }
        }
        
        // √áift tƒ±klama ile tam ekran
        gameFrame.addEventListener('dblclick', toggleFullscreen);
    </script>
</body>
</html>
